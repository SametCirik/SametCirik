# Ä°ÅŸ akÄ±ÅŸÄ±nÄ±n adÄ±
name: GitHub Snake Game

on:
  # Ä°ÅŸ akÄ±ÅŸÄ±nÄ± her gÃ¼n gece yarÄ±sÄ± (UTC) otomatik olarak Ã§alÄ±ÅŸtÄ±rÄ±r
  schedule:
    - cron: "0 0 * * *"

  # GitHub arayÃ¼zÃ¼nden manuel olarak tetiklemeye izin verir
  workflow_dispatch:

  # 'main' branch'ine her push yapÄ±ldÄ±ÄŸÄ±nda iÅŸ akÄ±ÅŸÄ±nÄ± tetikler
  push:
    branches:
      - main

jobs:
  generate:
    # Ä°ÅŸ akÄ±ÅŸÄ±nÄ±n Ã§alÄ±ÅŸacaÄŸÄ± sanal makine tÃ¼rÃ¼
    runs-on: ubuntu-latest
    # Ä°ÅŸ akÄ±ÅŸÄ± 10 dakikadan uzun sÃ¼rerse otomatik olarak iptal edilir
    timeout-minutes: 10

    # Ã–NEMLÄ°: Bu iÅŸ akÄ±ÅŸÄ±nÄ±n deponun iÃ§eriÄŸine yazma izni olmasÄ±nÄ± saÄŸlar.
    # Bu olmadan, 'output' branch'ine push yapÄ±lamaz.
    permissions:
      contents: write

    steps:
      # AdÄ±m 1: Deponun gÃ¼ncel halini sanal makineye indirir
      - name: Checkout Repository
        uses: actions/checkout@v4

      # AdÄ±m 2: GitHub katkÄ± grafiÄŸinden yÄ±lan animasyonlarÄ±nÄ± oluÅŸturur
      - name: Generate GitHub Contributions Snake Animations
        uses: platane/snk@v3
        with:
          # Animasyonun oluÅŸturulacaÄŸÄ± GitHub kullanÄ±cÄ± adÄ±
          # Bu kod, deponun sahibinin adÄ±nÄ± otomatik olarak alÄ±r
          github_user_name: ${{ github.repository_owner }}

          # OluÅŸturulacak Ã§Ä±ktÄ± dosyalarÄ± ve konfigÃ¼rasyonlarÄ±
          outputs: |
            dist/github-snake.svg
            dist/github-snake-dark.svg?palette=github-dark
            dist/ocean.gif?color_snake=orange&color_dots=#bfd6f6,#8dbdff,#64a1f4,#4b91f1,#3c7dd9
        env:
          # KatkÄ± verilerini GitHub API'sinden Ã§ekmek iÃ§in GITHUB_TOKEN gereklidir
          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}

      # AdÄ±m 3: OluÅŸturulan dosyalarÄ± 'output' branch'ine daÄŸÄ±tÄ±r (deploy eder)
      - name: Deploy to Output Branch
        uses: peaceiris/actions-gh-pages@v4
        with:
          # DosyalarÄ± yeni bir branch'e gÃ¶nderebilmek iÃ§in GITHUB_TOKEN gereklidir
          github_token: ${{ secrets.GITHUB_TOKEN }}
          
          # YayÄ±nlanacak dosyalarÄ±n bulunduÄŸu klasÃ¶r ('snk' aksiyonunun Ã§Ä±ktÄ± klasÃ¶rÃ¼)
          publish_dir: ./dist
          
          # DosyalarÄ±n gÃ¶nderileceÄŸi branch'in adÄ±
          publish_branch: output
          
          # 'output' branch'ine atÄ±lacak commit'in mesajÄ±
          commit_message: "chore: update snake animations ğŸ"
